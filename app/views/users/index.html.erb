<div class="flex flex-col gap-4 w-full max-w-7xl mx-auto">
    <h1 class="font-bold text-4xl">Users</h1>

    <%= form_with url: users_path, method: :get, class: "flex flex-col gap-1" do |f| %>
        <%= f.search_field :q, value: params[:q], placeholder: "Search by email", onKeyPress: "setTimeout(() => { this.form.submit() }, 300)", class: "w-full p-2 rounded-md border border-gray-300 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-700" %>

        <ul role="list" class="flex flex-row gap-2">
            <% User.statuses.each do |key, value| %>
                <li class="flex justify-between gap-x-6 py-5">
                    <%= f.radio_button :status, value, checked: params[:status] == value, onChange: "this.form.submit()", class: "hidden" %>
                    <label for="status_<%= value %>" data-checked="<%= params[:status] == value %>" class="cursor-pointer text-sm border border-gray-300 rounded-[2vw] p-2 data-[checked=true]:bg-blue-700 data-[checked=true]:text-white hover:bg-blue-400 hover:text-white">
                        <%= value.humanize %>
                    </label>
                </li>
            <% end %>
        </ul>
    <% end %>

    <ul role="list" class="divide-y divide-gray-100 mt-3">
        <% @users.each do |user| %>
            <li class="flex justify-between gap-x-6 py-5">
                <div class="flex min-w-0 gap-x-4">
                <img class="size-12 flex-none rounded-full bg-gray-50" src="https://ui-avatars.com/api/?name=<%= user.email %>" alt="">
                <div class="min-w-0 flex-auto">
                    <p class="text-sm/6 font-semibold text-gray-900"><%= user.name || 'John Doe' %></p>
                    <p class="mt-1 truncate text-xs/5 text-gray-500"><%= user.email %></p>
                </div>
                </div>
                <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
                <div class="mt-1 flex items-center gap-x-1.5">
                    <% if user.active? %>
                    <div class="flex-none rounded-full bg-emerald-500/20 p-1">
                        <div class="size-1.5 rounded-full bg-emerald-500"></div>
                    </div>
                    <% else %>
                    <div class="flex-none rounded-full bg-red-500/20 p-1">
                        <div class="size-1.5 rounded-full bg-red-500"></div>
                    </div>
                    <% end %>
                    <p class="text-xs/5 text-gray-500"><%= user.status.humanize %></p>
                </div>
                <p class="mt-1 text-xs/5 text-gray-500">Created at <%= user.created_at.strftime("%d/%m/%Y") %></p>
                </div>
            </li>
        <% end %>
    </ul>

</div>
